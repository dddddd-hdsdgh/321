<!--pages/child/PinyinParadise.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-title">æ‹¼éŸ³ç»ƒä¹ </view>
  
  <!-- æ‹¼éŸ³ç±»å‹é€‰æ‹© -->
  <view class="type-selector">
    <view 
      wx:for="{{pinyinTypes}}" 
      wx:key="id"
      class="type-item {{currentType === item.id ? 'active' : ''}}"
      bindtap="switchPinyinType"
      data-type="{{item.id}}"
    >
      {{item.name}}
    </view>
  </view>
  
  <!-- å¾—åˆ†æ˜¾ç¤º -->
  <view class="score-section">
    <view class="score-label">å¾—åˆ†ï¼š</view>
    <view class="score-value">{{score}}</view>
    <view class="progress-info">{{questionIndex + 1}}/{{questions.length}}</view>
  </view>
  
  <!-- é—®é¢˜åŒºåŸŸ -->
  <view class="question-section" wx:if="{{currentQuestion}}">
    <view class="question-header">
      <view class="pinyin-display" bindtap="playPinyin">
        <text class="pinyin-text">{{currentQuestion.pinyin}}</text>
        <view class="play-icon">â–¶</view>
      </view>
      <view class="hint-btn" bindtap="showHint">æç¤º</view>
    </view>
    
    <!-- é€‰é¡¹åŒºåŸŸ -->
    <view class="options-section">
      <view 
        wx:for="{{currentQuestion.options}}" 
        wx:key="index"
        class="option-item {{selectedOption === item ? 'selected' : ''}} {{showAnswer && item === currentQuestion.answer ? 'correct' : ''}} {{showAnswer && selectedOption === item && isCorrect === false ? 'wrong' : ''}}"
        bindtap="selectOption"
        data-option="{{item}}"
      >
        {{item}}
      </view>
    </view>
    
    <!-- ç­”æ¡ˆåé¦ˆ -->
    <view class="feedback-section" wx:if="{{showAnswer}}">
      <view class="feedback-message {{isCorrect ? 'correct' : 'wrong'}}">
        {{isCorrect ? 'å›ç­”æ­£ç¡®ï¼ğŸ‘' : 'å›ç­”é”™è¯¯ï¼ğŸ‘'}}
      </view>
      <view class="correct-answer" wx:if="{{!isCorrect}}">
        æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š{{currentQuestion.answer}}
      </view>
    </view>
    
    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button 
        wx:if="{{!showAnswer}}"
        class="submit-btn" 
        bindtap="submitAnswer"
        disabled="{{!selectedOption}}"
      >
        æäº¤ç­”æ¡ˆ
      </button>
      <button 
        wx:else
        class="next-btn" 
        bindtap="nextQuestion"
      >
        {{questionIndex + 1 < questions.length ? 'ä¸‹ä¸€é¢˜' : 'å®Œæˆç»ƒä¹ '}}
      </button>
    </view>
  </view>
  
  <!-- é‡æ–°å¼€å§‹æŒ‰é’® -->
  <view class="restart-section">
    <button class="restart-btn" bindtap="restartPractice" type="warn">
      é‡æ–°å¼€å§‹ç»ƒä¹ 
    </button>
  </view>
</view>