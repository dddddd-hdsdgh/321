<!--pages/parent/Dashboard.wxml-->
<view class="parent-dashboard-container">
  <!-- é¡¶éƒ¨æ  -->
  <view class="header">
    <view class="header-title">å®¶é•¿ç®¡ç†ä¸­å¿ƒ</view>
    <view class="back-button" bindtap="switchToChildMode">
      <text class="back-icon">â†</text>
      <text>è¿”å›å­¦ä¹ </text>
    </view>
  </view>

  <!-- å„¿ç«¥åˆ‡æ¢å’Œä¿¡æ¯å¡ç‰‡ -->
  <view class="child-info-card">
    <view class="child-avatar">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</view>
    <view class="child-details">
      <view class="child-name">{{children[currentChildIndex].name}}</view>
      <view class="child-meta">{{children[currentChildIndex].age}}å² | {{children[currentChildIndex].grade}}</view>
    </view>
    <view class="child-switch-button" bindtap="toggleChildSelector">
      <text>åˆ‡æ¢å„¿ç«¥ âŒµ</text>
    </view>
  </view>

  <!-- å­¦ä¹ ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-card">
    <view class="stats-title">å­¦ä¹ ç»Ÿè®¡</view>
    <view class="stats-grid">
      <view class="stat-item">
        <view class="stat-value">{{children[currentChildIndex].studyStats.totalStudyTime}}</view>
        <view class="stat-label">æ€»å­¦ä¹ æ—¶é•¿</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{children[currentChildIndex].studyStats.completedLessons}}</view>
        <view class="stat-label">å·²å®Œæˆè¯¾ç¨‹</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{children[currentChildIndex].studyStats.currentStreak}}å¤©</view>
        <view class="stat-label">è¿ç»­å­¦ä¹ </view>
      </view>
    </view>
  </view>

  <!-- å„¿ç«¥é€‰æ‹©å™¨å¼¹çª— -->
  <view class="child-selector-mask" wx:if="{{showChildSelector}}" bindtap="toggleChildSelector"></view>
  <view class="child-selector" wx:if="{{showChildSelector}}">
    <view class="selector-header">
      <text class="selector-title">é€‰æ‹©å­©å­</text>
      <view class="selector-close" bindtap="toggleChildSelector">Ã—</view>
    </view>
    <view class="child-list">
      <view 
        class="child-item {{index === currentChildIndex ? 'active' : ''}}"
        wx:for="{{children}}" 
        wx:key="id"
        data-index="{{index}}"
        bindtap="selectChild"
      >
        <view class="child-item-avatar">ğŸ‘¶</view>
        <view class="child-item-info">
          <view class="child-item-name">{{item.name}}</view>
          <view class="child-item-meta">{{item.age}}å² | {{item.grade}}</view>
        </view>
        <view class="child-item-check" wx:if="{{index === currentChildIndex}}">âœ“</view>
      </view>
    </view>
  </view>

  <!-- ç®¡ç†åŠŸèƒ½åˆ—è¡¨ -->
  <view class="management-section">
    <view class="section-title">ç®¡ç†åŠŸèƒ½</view>
    <view class="management-grid">
      <view class="management-item" bindtap="goToCourses">
        <view class="management-icon">ğŸ“š</view>
        <view class="management-text">è¯¾ç¨‹ç®¡ç†</view>
      </view>
      <view class="management-item" bindtap="goToStatistics">
        <view class="management-icon">ğŸ“Š</view>
        <view class="management-text">å­¦ä¹ ç»Ÿè®¡</view>
      </view>
      <view class="management-item" bindtap="manageChildren">
        <view class="management-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</view>
        <view class="management-text">å„¿ç«¥ç®¡ç†</view>
      </view>
      <view class="management-item" bindtap="goToParentSettings">
        <view class="management-icon">âš™ï¸</view>
        <view class="management-text">å®¶é•¿è®¾ç½®</view>
      </view>
    </view>
  </view>
</view>