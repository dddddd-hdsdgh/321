<!-- pages/parent/Courses.wxml -->
<view class="courses-container">
  <!-- 头部导航栏 -->
  <view class="header">
    <view class="back-button" bindtap="navigateBack">
      <image src="/assets/icons/back.png" mode="aspectFit"></image>
    </view>
    <view class="header-title">课程管理</view>
    <view class="header-right">
      <view class="search-icon" bindtap="showSearch">
        <image src="/assets/icons/search.png" mode="aspectFit"></image>
      </view>
    </view>
  </view>

  <!-- 儿童选择器 -->
  <view class="child-selector">
    <view class="selector-title">选择孩子</view>
    <scroll-view scroll-x="true" class="children-scroll">
      <view wx:for="{{children}}" wx:key="id" 
            class="child-item {{currentChildId === item.id ? 'active' : ''}}" 
            bindtap="onChildChange" data-id="{{item.id}}">
        <view class="child-avatar">
          <image src="{{item.avatar}}" mode="aspectFill"></image>
        </view>
        <view class="child-name">{{item.name}}</view>
      </view>
    </scroll-view>
  </view>

  <!-- 课程筛选 -->
  <view class="filter-section">
    <view class="filter-tabs">
      <view class="filter-tab {{activeFilter === 'all' ? 'active' : ''}}" bindtap="onFilterChange" data-filter="all">
        全部课程
      </view>
      <view class="filter-tab {{activeFilter === 'learning' ? 'active' : ''}}" bindtap="onFilterChange" data-filter="learning">
        学习中
      </view>
      <view class="filter-tab {{activeFilter === 'completed' ? 'active' : ''}}" bindtap="onFilterChange" data-filter="completed">
        已完成
      </view>
      <view class="filter-tab {{activeFilter === 'recommended' ? 'active' : ''}}" bindtap="onFilterChange" data-filter="recommended">
        推荐课程
      </view>
    </view>
  </view>

  <!-- 课程列表 -->
  <view class="courses-list">
    <block wx:if="{{filteredCourses.length > 0}}">
      <view wx:for="{{filteredCourses}}" wx:key="id" class="course-item" bindtap="goToCourseDetail" data-id="{{item.id}}">
        <view class="course-card">
          <!-- 课程封面 -->
          <view class="course-cover">
            <image src="{{item.cover}}" mode="aspectFill"></image>
            <view class="course-badge" wx:if="{{item.badge}}">{{item.badge}}</view>
          </view>
          
          <!-- 课程信息 -->
          <view class="course-info">
            <view class="course-title">{{item.title}}</view>
            <view class="course-meta">
              <view class="course-grade">年级: {{item.grade}}</view>
              <view class="course-lessons">{{item.lessons}}课时</view>
            </view>
            
            <!-- 课程进度 -->
            <view class="course-progress">
              <view class="progress-bar">
                <view class="progress-fill" style="width: {{item.progress}}%"></view>
              </view>
              <view class="progress-text">{{item.progress}}%</view>
            </view>
            
            <!-- 学习时长 -->
            <view class="course-duration">
              <text class="duration-label">已学习:</text>
              <text class="duration-value">{{item.learnedMinutes}}分钟</text>
            </view>
          </view>
        </view>
      </view>
    </block>
    
    <!-- 无课程提示 -->
    <view wx:else class="empty-state">
      <image src="/assets/icons/empty-courses.png" mode="aspectFit"></image>
      <text class="empty-text">暂无相关课程</text>
      <button class="empty-button" bindtap="exploreCourses">探索课程</button>
    </view>
  </view>

  <!-- 课程操作按钮 -->
  <view class="action-buttons" wx:if="{{filteredCourses.length > 0}}">
    <button class="action-button recommend" bindtap="recommendCourses">
      <image src="/assets/icons/recommend.png" mode="aspectFit"></image>
      <text>推荐课程</text>
    </button>
    <button class="action-button download" bindtap="downloadCourses">
      <image src="/assets/icons/download.png" mode="aspectFit"></image>
      <text>下载课程</text>
    </button>
  </view>
</view>